<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Aprendendo IndexedDB</title>
</head>
<body>
    <script>
        var connection //Criando uma variavel para a conexão

        //Fazendo uma requisição de abertura para o banco de dados indexedDB
        var openRequest = window.indexedDB.open('aluraframe', 2) //Criando o banco aluraframe, (nome do banco, versão do banco)

        //EVENTOS PARA ACESSAR O BANCO

        //Este evento cria ou altera um banco já eistente
        openRequest.onupgradeneeded = e => { //Quando este evento for disparada a função recebi o evento, como e como prametro
            console.log("Cria ou altera um banco já eistente")
            var minhaConnection = e.target.result //Pegando os dados da coneão para criar uma object store
            minhaConnection.createObjectStore('negociacoes') //Criando uma 'tabela' no banco indexedDB
        }

        //Este evento é executado quando conseguir estabelecer uma conexão
        openRequest.onsuccess = e => { //
            console.log("Conexão obtida com sucesso")
            connection = e.target.result //Recebendo dados da conexão com o banco
            console.log(connection)
        }

        //Este evento é executado se houver algum erro na conexão
        openRequest.onerror = e => {
            console.log(e.target.error) //Imprimindo o erro
        }
    </script>
</body>
</html>